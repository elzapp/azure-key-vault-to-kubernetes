{"componentChunkName":"component---node-modules-gatsby-theme-apollo-docs-src-components-template-js","path":"/security/authentication/","result":{"data":{"site":{"pathPrefix":"","siteMetadata":{"title":"akv2k8s docs","description":"How to get Azure Key Vault objects into Kubernetes"}},"file":{"childMarkdownRemark":{"frontmatter":{"title":"Authentication","description":"Learn about the different options for authenticating with Azure Key Vault."},"headings":[{"value":"Situations where Default Authentication does not Work"},{"value":"Custom Authentication"},{"value":"Custom Authentication for the Controller"},{"value":"Custom Authentication for the Env Injector"},{"value":"Custom Authentication Options"}],"fields":{"image":"social-cards/authentication.png","graphManagerUrl":""},"htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"By default both the Controller and the Env Injector will assume it is running on Azure (since Azure Key Vault is most commonly used in Azure) - and use the default AKS service principal for authentication - unless custom authentication is provided (see "},{"type":"element","tagName":"a","properties":{"href":"#custom-authentication"},"children":[{"type":"text","value":"Custom Authentication"}]},{"type":"text","value":" below). "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Default authentication is the AKS credentials that are available on all Nodes (hosts) at "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/etc/kubernetes/azure.json"}]},{"type":"text","value":". These credentials are the same as the Kubernetes cluster use when interacting with Azure to create VM's, Load Balancers and other cloud infrastructure. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Note: The preferred solution would be to use "},{"type":"element","tagName":"a","properties":{"href":"https://docs.microsoft.com/en-us/azure/aks/use-managed-identity"},"children":[{"type":"text","value":"Azure Managed Identities"}]},{"type":"text","value":", but this is still in preview - so for now we rely on the default AKS service principal."}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"situations-where-default-authentication-does-not-work","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#situations-where-default-authentication-does-not-work","ariaLabel":"situations where default authentication does not work permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Situations where Default Authentication does not Work"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Currently only one situations has been identified, where default authentication does not work inside Azure."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"When a "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/policy/pod-security-policy/"},"children":[{"type":"text","value":"Pod Security Policy"}]},{"type":"text","value":" is configured in the cluster, preventing containers from reading from the host."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Two solutions exists:  "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Change the Pod Security Policy to list "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/etc/kubernetes/azure.json"}]},{"type":"text","value":" under "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/policy/pod-security-policy/#volumes-and-file-systems"},"children":[{"type":"text","value":"AllowedHostPaths"}]},{"type":"text","value":" "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Or "},{"type":"element","tagName":"a","properties":{"href":"#custom-authentication"},"children":[{"type":"text","value":"use custom authentication"}]},{"type":"text","value":". "}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"custom-authentication","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#custom-authentication","ariaLabel":"custom authentication permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Custom Authentication"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"It is possible to give the Controller and/or the Env Injector specific credentials to authenticate with Azure Key Vault. The authentication requirements for the Controller and Env Injector are covered below."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"custom-authentication-for-the-controller","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#custom-authentication-for-the-controller","ariaLabel":"custom authentication for the controller permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Custom Authentication for the Controller"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The Controller will need Azure Key Vault credentials to get Secrets from Azure Key Vault and store them as Kubernetes Secrets. In order to provide custom credentials, pass inn the value "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"keyVault.customAuth.enabled=true"}]},{"type":"text","value":" to the Controller Helm Chart together with one of the "},{"type":"element","tagName":"a","properties":{"href":"#custom-authentication-options"},"children":[{"type":"text","value":"Authentication options"}]},{"type":"text","value":" described below."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Fore more details, see the "},{"type":"element","tagName":"a","properties":{"href":"/stable/azure-key-vault-controller/README/#installing-the-chart"},"children":[{"type":"text","value":"Controller Helm Chart"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"custom-authentication-for-the-env-injector","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#custom-authentication-for-the-env-injector","ariaLabel":"custom authentication for the env injector permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Custom Authentication for the Env Injector"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The Env-Injector execute locally inside your Pod and needs access to Azure Key Vault credentials to inject secrets. Two options are available:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"The Env-Injector running inside the container request credentials from the Env-Injector authentication service (default / centralized)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"The Pod hosting the container provide credentials to the Env-Injector running inside the container (custom authentication / local)"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"For option 1 you only provide credentials when installation of the Env-Injector."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"For option 2 you provide credentials to every Pod that will use the Env-Injector."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Option 1 is easiest and most convenient, but will give the same credentials to all Pods using Env-Injector. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Recommendations:"}]}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tagName":"table","properties":{},"children":[{"type":"element","tagName":"thead","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"th","properties":{},"children":[]},{"type":"element","tagName":"th","properties":{"align":"center"},"children":[{"type":"text","value":"Env-Injector Auth Service"}]},{"type":"element","tagName":"th","properties":{"align":"center"},"children":[{"type":"text","value":"Credentials in Pod"}]}]}]},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Using one Azure Key Vault per cluster"}]},{"type":"element","tagName":"td","properties":{"align":"center"},"children":[{"type":"text","value":"✔"}]},{"type":"element","tagName":"td","properties":{"align":"center"},"children":[]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Using multiple Azure Key Vaults per cluster (f.ex. one Key Vault per application) and it is OK to use the same credentials to all Key Vaults"}]},{"type":"element","tagName":"td","properties":{"align":"center"},"children":[{"type":"text","value":"✔"}]},{"type":"element","tagName":"td","properties":{"align":"center"},"children":[]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Multi-tenant environment (multiple Azure Key Vaults)"}]},{"type":"element","tagName":"td","properties":{"align":"center"},"children":[]},{"type":"element","tagName":"td","properties":{"align":"center"},"children":[{"type":"text","value":"✔"}]}]}]}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tagName":"table","properties":{},"children":[{"type":"element","tagName":"thead","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"th","properties":{},"children":[]},{"type":"element","tagName":"th","properties":{"align":"center"},"children":[{"type":"text","value":"Env-Injector Auth Service"}]},{"type":"element","tagName":"th","properties":{"align":"center"},"children":[{"type":"text","value":"Credentials in Pod"}]}]}]},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Provide credentials only during Env-Injector install"}]},{"type":"element","tagName":"td","properties":{"align":"center"},"children":[{"type":"text","value":"✔"}]},{"type":"element","tagName":"td","properties":{"align":"center"},"children":[]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Must provide credentials to every Pod when using Env-Injector"}]},{"type":"element","tagName":"td","properties":{"align":"center"},"children":[]},{"type":"element","tagName":"td","properties":{"align":"center"},"children":[{"type":"text","value":"✔"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"The same Azure Key Vault credentials used in all Pods using Env-Injector"}]},{"type":"element","tagName":"td","properties":{"align":"center"},"children":[{"type":"text","value":"✔"}]},{"type":"element","tagName":"td","properties":{"align":"center"},"children":[]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Recommended if there is one Azure Key Vault per cluster"}]},{"type":"element","tagName":"td","properties":{"align":"center"},"children":[{"type":"text","value":"✔"}]},{"type":"element","tagName":"td","properties":{"align":"center"},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To use custom authentication for the Env Injector there are three options:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Use Microsft's "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/Azure/aad-pod-identity"},"children":[{"type":"text","value":"AAD Pod Identity"}]},{"type":"text","value":" (see "},{"type":"element","tagName":"a","properties":{"href":"/stable/azure-key-vault-env-injector/README/#using-custom-authentication-with-aad-pod-identity"},"children":[{"type":"text","value":"Using Custom Authentication with AAD Pod Identity"}]},{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Use custom credentials through credential injection (see "},{"type":"element","tagName":"a","properties":{"href":"/stable/azure-key-vault-env-injector/README/#using-custom-authentication-with-credential-injection-enabled"},"children":[{"type":"text","value":"Using Custom Authentication with Credential Injection Enabled"}]},{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Provide credentials for each Pod using the Env Injector pattern using "},{"type":"element","tagName":"a","properties":{"href":"#custom-authentication-options"},"children":[{"type":"text","value":"Authentication options"}]},{"type":"text","value":" below."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To avoid using option no. 3, support for a more convenient solution (no. 2) is supported where the Azure Key Vault credentials in the Env Injector (using "},{"type":"element","tagName":"a","properties":{"href":"#custom-authentication-options"},"children":[{"type":"text","value":"Authentication options"}]},{"type":"text","value":" below) is \"forwarded\" to the the Pods. The Env Injector will create a Kubernetes Secret containing the credentials and mutate the Pod's env section to reference the credentials in the Secret. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Fore more details, see the "},{"type":"element","tagName":"a","properties":{"href":"/stable/azure-key-vault-env-injector/README/#installing-the-chart"},"children":[{"type":"text","value":"Env Injector Helm Chart"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"custom-authentication-options","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#custom-authentication-options","ariaLabel":"custom authentication options permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Custom Authentication Options"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The following authentication options are available:"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tagName":"table","properties":{},"children":[{"type":"element","tagName":"thead","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"Authentication type"}]},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"Environment variable"}]},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Managed identities for Azure resources (used to be MSI)"}]},{"type":"element","tagName":"td","properties":{},"children":[]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"No credentials are needed for managed identity authentication. The Kubernetes cluster must be running in Azure and the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"aad-pod-identity"}]},{"type":"text","value":" controller must be installed. A "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"AzureIdentity"}]},{"type":"text","value":" and "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"AzureIdentityBinding"}]},{"type":"text","value":" must be defined. See "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/Azure/aad-pod-identity"},"children":[{"type":"text","value":"https://github.com/Azure/aad-pod-identity"}]},{"type":"text","value":" for details."}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Client credentials"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"AZURE_TENANT_ID"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"The ID for the Active Directory tenant that the service principal belongs to."}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"AZURE_CLIENT_ID"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"The name or ID of the service principal."}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"AZURE_CLIENT_SECRET"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"The secret associated with the service principal."}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Certificate"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"AZURE_TENANT_ID"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"The ID for the Active Directory tenant that the certificate is registered with."}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"AZURE_CLIENT_ID"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"The application client ID associated with the certificate."}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"AZURE_CERTIFICATE_PATH"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"The path to the client certificate file."}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"AZURE_CERTIFICATE_PASSWORD"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"The password for the client certificate."}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Username/Password"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"AZURE_TENANT_ID"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"The ID for the Active Directory tenant that the user belongs to."}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"AZURE_CLIENT_ID"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"The application client ID."}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"AZURE_USERNAME"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"The username to sign in with."}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"AZURE_PASSWORD"}]}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"The password to sign in with."}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Note: These env variables are sensitive and should be stored in a Kubernetes "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Secret"}]},{"type":"text","value":" resource, then referenced by "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/configuration/secret/#using-secrets-as-environment-variables"},"children":[{"type":"text","value":"Using Secrets as Environment Variables"}]},{"type":"text","value":"."}]},{"type":"text","value":" "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"See official MS documentation for more details on how environment base authentication works for Azure: "},{"type":"element","tagName":"a","properties":{"href":"https://docs.microsoft.com/en-us/go/azure/azure-sdk-go-authorization#use-environment-based-authentication"},"children":[{"type":"text","value":"https://docs.microsoft.com/en-us/go/azure/azure-sdk-go-authorization#use-environment-based-authentication"}]}]}],"data":{"quirksMode":false}}},"childMdx":null}},"pageContext":{"id":"0e27c9f9-3c6a-557a-b1b8-80ad42775957","subtitle":"","versionDifference":0,"versionBasePath":"/vdefault","sidebarContents":[{"title":null,"pages":[{"title":"Overview","description":"Explore Azure Key Vault to Kubernetes","path":"/"},{"title":"Why use akv2k8s?","description":null,"path":"/why-akv2k8s/"},{"title":"Quick Start","description":"Quickly get started using Azure Key Vault to Kubernetes","path":"/quick-start/"},{"title":"How it Works","description":"Learn about the inner workings of akv2k8s.","path":"/how-it-works/"}]},{"title":"Installation","pages":[{"title":"Overview","description":"Different options for installing akv2k8s","path":"/installation/"},{"title":"Requirements","description":"Requirements for installing akv2k8s","path":"/installation/requirements/"},{"title":"Installation with Helm","description":"How to install Azure Key Vault to Kubernetes with Helm","path":"/installation/installing-with-helm/"},{"title":"Installation without Helm","description":"How to setup Azure Key Vault to Kubernetes","path":"/installation/installing-without-helm/"},{"title":"Upgrading  with Helm","description":"How to update Azure Key Vault to Kubernetes with Helm","path":"/installation/updating-with-helm/"}]},{"title":"Tutorials","pages":[{"title":"Tutorials","description":"A quick introduction to the tutorials","path":"/tutorials/"},{"title":"Prerequisites","description":"A quick overview of the prerequisites needed to complete the tutorials","path":"/tutorials/prerequisites/"},{"title":"Sync Secret","description":"Sync a secret from Azure Key Vault into a Kubernetes Secret","path":"/tutorials/sync/1-secret/"},{"title":"Sync Certificate","description":"Sync a certificate from Azure Key Vault into a Kubernetes Secret.","path":"/tutorials/sync/2-certificate/"},{"title":"Sync Signing Key","description":"Sync signing key from Azure Key Vault into a Kubernetes Secret","path":"/tutorials/sync/3-signing-key/"},{"title":"Sync Multi Key Value Secret","description":"Sync a multi-key-value secret from Azure Key Vault into a Kubernetes Secret","path":"/tutorials/sync/4-multi-key-value-secret/"},{"title":"Inject Secret","description":"Inject an Azure Key Vault secret directly into a container application","path":"/tutorials/env-injection/1-secret/"},{"title":"Inject Certificate","description":"Inject an Azure Key Vault certificate key pair directly into a container application","path":"/tutorials/env-injection/2-certificate/"},{"title":"Inject Signing Key","description":"Inject a signing key from Azure Key Vault as environment variable into an application","path":"/tutorials/env-injection/3-signing-key/"},{"title":"Inject PFX Certificate","description":"Inject a PFX certificate from Azure Key Vault as environment variables into an application","path":"/tutorials/env-injection/5-pfx-certificate/"}]},{"title":"Security","pages":[{"title":"Authentication","description":"Learn about the different options for authenticating with Azure Key Vault.","path":"/security/authentication/"},{"title":"Authorization","description":"Learn how to set the proper access rights in Azure Key Vault","path":"/security/authorization/"},{"title":"Enable Environment Injecton","description":"Learn how to enable environment injection per Kubernetes namespace","path":"/security/enable-env-injection/"}]},{"title":"Availability","pages":[]},{"title":"Troubleshooting","pages":[{"title":"Get the akv2k8s Controller Log","description":"How to access the Controller log and specify log level","path":"/troubleshooting/controller-log/"},{"title":"Set env-injector log-level","description":"How to set the log-level for the env-injector","path":"/troubleshooting/env-injector-log-level/"},{"title":"Known Issues","description":"A list of known issues and available solutions or workarounds","path":"/troubleshooting/known-issues/"}]},{"title":"Reference","pages":[{"title":"Reference","description":"Reference of akv2k8s objects","path":"/reference/"},{"title":"AzureKeyVaultSecret","description":"Reference of AzureKeyVaultSecret custom resource definition","path":"/reference/azure-key-vault-secret/"},{"title":"Controller Helm Chart","description":"Azure Key Vault Controller reference","path":"/stable/azure-key-vault-controller/README/"},{"title":"Env-Injector Helm Chart","description":"Azure Key Vault Env-Injector reference","path":"/stable/azure-key-vault-env-injector/README/"}]}],"githubUrl":"https://github.com/sparebankenvest/azure-key-vault-to-kubernetes/tree/master/docs/source/content/security/authentication.md","spectrumUrl":"","twitterHandle":"","versions":[],"defaultVersion":"default","baseUrl":"https://akv2k8s.io"}},"staticQueryHashes":["1511030359","2468095761","2468095761","426988268","426988268"]}